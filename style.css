:root{
  --bg:#0b1f1a;--card:#0f2822;--border:#1f3a34;--accent:#10b981;--accent-2:#34d399;--text:#e6fffa;--sub:#8ee6d3;
  --container-px: 100vw;
  --grid-max: 560px;
  --cell-fs: clamp(20px, 6.6vw, 36px);
  --np-scale: 1; /* numpad scale */
  --np-fs: clamp(26px, 8.5vw, 40px);
  --safe-left: env(safe-area-inset-left, 0px);
  --safe-right: env(safe-area-inset-right, 0px);
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
  --given-bg:#0b2a26; --given-fg:#7de0ce; --solve-bg:#10291f; --solve-fg:#b7ffef;
}
*{box-sizing:border-box}
html,body{margin:0;padding:0;overflow-x:hidden;background:var(--bg);color:var(--text);min-height:100dvh}
body{font-family:"Hiragino Sans","Hiragino Kaku Gothic ProN","Noto Sans JP","Yu Gothic","Meiryo",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}

header{position:sticky;top:0;background:var(--accent);color:#03211b;z-index:2}
header .wrap{width:100%;padding:max(6px, calc(6px + var(--safe-top))) calc(10px + var(--safe-right)) 6px calc(10px + var(--safe-left));
  margin:0 auto;display:grid; place-items:center; text-align:center; gap:6px;}
h1{font-size:clamp(15px,4.4vw,20px);margin:0;line-height:1.12}
.badge{background:#f59e0b;color:#111827;padding:4px 8px;border-radius:8px;font-weight:800}

main{width:100%;padding-left: calc(8px + var(--safe-left));padding-right: calc(8px + var(--safe-right));
  padding-bottom: calc(16px + var(--safe-bottom));
  margin:14px auto;display:grid; gap:14px;justify-items:center;}
.card{width:min(100%,var(--container-px));background:var(--card);border:1px solid var(--border);border-radius:14px;padding:12px}
.board-card{padding-bottom:16px}

.card-head.row3{
  display:grid;
  grid-template-columns: 1fr 1fr 1fr;
  align-items:center;
  margin-bottom:10px;
}
.card-head.row3 .left{justify-self:start; padding-left:4px; font-size:clamp(18px,5.4vw,24px); margin:0}
.card-head.row3 .center{justify-self:center}
.card-head.row3 .right{justify-self:end}

button{background:var(--accent);color:#062a22;border:none;border-radius:12px;padding:10px 16px;font-weight:900;cursor:pointer;touch-action:manipulation}
button:hover{filter:brightness(1.05)}
button.secondary{background:#1f3a34;color:var(--sub)}

/* Board */
.board-wrap{display:grid; place-items:center;}
.grid.board{
  width: min(100%, var(--grid-max));
  margin-inline: auto;
  display:grid;grid-template-columns:repeat(9,1fr);
  gap:1px;background:#0b1f1a;padding:4px;border-radius:12px;border:1px solid var(--border)
}

.cell{width:100%;aspect-ratio:1/1;display:flex;align-items:center;justify-content:center;font-size:var(--cell-fs);
  font-weight:900;letter-spacing:.02em;border-radius:10px;border:1px solid var(--border);background:#0c1f1a;color:var(--text);user-select:none}
.cell.given{background:var(--given-bg); color:var(--given-fg)}
.cell.solved{background:var(--solve-bg); color:var(--solve-fg)}
.cell.empty{background:#0c1f1a; color:#466}
.cell.cursor{outline:2px solid var(--accent); outline-offset:-2px}
.grid .cell[data-bold-top="1"]{border-top:1.6px solid var(--accent-2)}
.grid .cell[data-bold-left="1"]{border-left:1.6px solid var(--accent-2)}
.grid .cell[data-bold-right="1"]{border-right:1.6px solid var(--accent-2)}
.grid .cell[data-bold-bottom="1"]{border-bottom:1.6px solid var(--accent-2)}

/* Numpad wrapper for scaling */
#numpadWrap{width:min(100%, var(--grid-max)); margin:0 auto; transform-origin: bottom center;}
.numpad{
  width:100%;
  margin:0 auto calc(12px + var(--safe-bottom)) auto;
  display:grid;grid-template-columns:repeat(3, minmax(0,1fr));gap:14px;
  transform: scale(var(--np-scale));
}
.numpad button{
  font-size: calc(var(--np-fs) * var(--np-scale));
  padding: calc(clamp(12px, 2.8vh, 22px) * var(--np-scale)) 12px;
  border-radius:14px;background:#0f3a30;color:#aef5e4;border:1px solid #1f6a57;
  touch-action:manipulation;
}

.numpad button.ghost{background:#0d2b23;color:#8ee6d3}

.console{background:#061a15;border:1px dashed var(--border);border-radius:12px;padding:10px;min-height:80px;white-space:pre-wrap;word-break:break-word;color:#a7f3d0}

footer{background:transparent;color:var(--sub)}
footer .wrap{width:100%;padding:10px calc(10px + var(--safe-right)) calc(10px + var(--safe-bottom)) calc(10px + var(--safe-left));margin:0 auto;display:grid; place-items:center;text-align:center}
